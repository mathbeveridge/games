<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Games: Proof of the Tuft Principle</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script>window.MathJax = {
  tex: {
    inlineMath: [['\\(','\\)']],
    tags: "none",
    useLabelIds: true,
    tagSide: "right",
    tagIndent: ".8em",
    packages: {'[+]': ['base', 'extpfeil', 'ams', 'amscd', 'newcommand', 'knowl']}
  },
  options: {
    ignoreHtmlClass: "tex2jax_ignore",
    processHtmlClass: "has_am",
  },
  chtml: {
    scale: 0.88,
    mtextInheritFont: true
  },
  loader: {
    load: ['input/asciimath', '[tex]/extpfeil', '[tex]/amscd', '[tex]/newcommand', '[pretext]/mathjaxknowl3.js'],
    paths: {pretext: "https://pretextbook.org/js/lib"},
  },
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script xmlns:svg="http://www.w3.org/2000/svg" src="https://pretextbook.org/js/lib/jquery.min.js"></script><script xmlns:svg="http://www.w3.org/2000/svg" src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script xmlns:svg="http://www.w3.org/2000/svg" src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script xmlns:svg="http://www.w3.org/2000/svg" src="https://pretextbook.org/js/0.13/pretext.js"></script><script xmlns:svg="http://www.w3.org/2000/svg" src="https://pretextbook.org/js/0.13/pretext_add_on.js"></script><script xmlns:svg="http://www.w3.org/2000/svg" src="https://pretextbook.org/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script xmlns:svg="http://www.w3.org/2000/svg">sagecellEvalName='Evaluate (Sage)';
</script><link xmlns:svg="http://www.w3.org/2000/svg" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/pretext.css" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/pretext_add_on.css" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/banner_default.css" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/toc_default.css" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/knowls_default.css" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/style_default.css" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/colors_default.css" rel="stylesheet" type="text/css">
<link xmlns:svg="http://www.w3.org/2000/svg" href="https://pretextbook.org/css/0.31/setcolors.css" rel="stylesheet" type="text/css">
<!-- 2019-10-12: Temporary - CSS file for experiments with styling --><link xmlns:svg="http://www.w3.org/2000/svg" href="developer.css" rel="stylesheet" type="text/css">
</head>
<body class="pretext-book has-toc has-sidebar-left">
<a class="assistive" href="#content">Skip to main content</a><div xmlns:svg="http://www.w3.org/2000/svg" id="latex-macros" class="hidden-content" style="display:none">\(    \newcommand{\identity}{\mathrm{id}}
    \newcommand{\notdivide}{{\not{\mid}}}
    \newcommand{\notsubset}{\not\subset}
    \newcommand{\lcm}{\operatorname{lcm}}
    \newcommand{\gf}{\operatorname{GF}}
    \newcommand{\inn}{\operatorname{Inn}}
    \newcommand{\aut}{\operatorname{Aut}}
    \newcommand{\Hom}{\operatorname{Hom}}
    \newcommand{\cis}{\operatorname{cis}}
    \newcommand{\chr}{\operatorname{char}}
    \newcommand{\Null}{\operatorname{Null}}



    \definecolor{orange}{RGB}{255, 165,   0}
    \definecolor{crimson}{RGB}{220,20,60}
    \definecolor{pink}{RGB}{255,20,147}
    \definecolor{darkGreen}{RGB}{34,139,34}
    \definecolor{olive}{RGB}{128,128,0}
    \definecolor{teal}{RGB}{0,128,128}
    \definecolor{turquoise}{RGB}{64,224,208}
    \definecolor{navy}{RGB}{30, 144, 255}
    \definecolor{purple}{RGB}{128,0,128}
    \definecolor{indigo}{RGB}{216, 191, 216}
    \definecolor{maroon}{RGB}{128,0,0}
    \definecolor{gold}{RGB}{255,215,0}
    \definecolor{lemon}{RGB}{255, 250, 205}
    \definecolor{peru}{RGB}{205, 133,  63}

    \definecolor{alizarin}{rgb}{0.82, 0.1, 0.26}
    \definecolor{brightmaroon}{rgb}{0.76, 0.13, 0.28}
    \definecolor{cardinal}{rgb}{0.77, 0.12, 0.23}
    \definecolor{tuscanred}{rgb}{0.51, 0.21, 0.21}
    \definecolor{steelBlue}{rgb}{0.27, 0.51, 0.71}
    \definecolor{tyrianpurple}{rgb}{0.4, 0.01, 0.24}

    \def\Z{\mathbb Z}
    \def\R{\mathbb R}
    \def\Q{\mathbb Q}
    \def\N{\mathbb N}
    \def\C{\mathbb C}

    \def\ba{{\mathbf{a}}}
    \def\bb{\mathbf{b}}
    \def\bh{{\mathbf{h}}}
    \def\bu{{\mathbf{u}}}
    \def\bv{{\mathbf{v}}}
    \def\bw{{\mathbf{w}}}   
    \def\bx{{\mathbf{x}}}
    \def\by{\mathbf{y}}    
    \def\bone{{\mathbf{1}}}
    \def\bzero{\mathbf{0}}

    \def\var{{\mbox{var}}}
    \def\P{{\mathbb{P}}}
    \def\E{{\mathbb{E}}}

    \def\cA{{\mathcal{A}}}
    \def\cB{{\mathcal{B}}}
    \def\cC{{\mathcal{C}}}
    \def\cP{\mathcal P}
    \def\cE{\mathcal E}
    \def\cO{\mathcal O}


   

    \def\kin{k^{\mathrm{in}}}
    \def\kout{k^{\mathrm{out}}}

    \newcommand{\indeg}[1]{k^{\mathrm{in}}_{#1}}
    \newcommand{\outdeg}[1]{k^{\mathrm{out}}_{#1}}

    \tikzset{-&gt;-/.style={decoration={
     markings,
     mark=at position .5 with {\arrow{latex}}},postaction={decorate}}}





\newcommand{\pile}[1]{\bullet{#1}}
\newcommand{\ppile}[1]{\bullet({#1})}

\newcommand{\nim}[1]{*{#1}}

\newcommand{\bc}{C}

\newcommand{\R}{{\mathbb R}}



\def\nimsum{\, \oplus \,}
\def\mex{{\mathrm{mex}}}
\def\g{g}

\newcommand{\inter}{{\mathrm{int}}}


\def\cA{{\mathcal A}}
\def\cB{{\mathcal B}}
\def\cF{{\mathcal F}}
\def\cG{{\mathcal G}}
\def\cH{{\mathcal H}}
\def\cN{{\mathcal N}}
\def\cQ{{\mathcal Q}}
\def\cP{{\mathcal P}}
\def\W{{\mathbb W}}

     



\newcommand{\nimbleboard}[1]{

\begin{scope}[shift={(.25, .4)}]
\draw (0,-.3) -- (#1,-.3) -- (#1+.45, .7) -- (#1+.45, 1);
\draw (0,0) -- (#1,0);
\draw (.45,1) -- (#1+.45,1);

\foreach \i in {0, ..., #1} {
  \draw (\i, -.3) -- (\i, 0) -- (\i+.45,1);
}

\foreach \i in {1, ..., #1} {
  \node[style={font=\sffamily\scriptsize}] at (\i - .5, -.15) {\i};
}

\end{scope}

}
\newcommand{\coin}[1]{
\begin{scope}[shift={#1}]

\draw[color=white, fill=white] (-.4, 0) -- (-.4, -.1) -- (.4,-.1) --  (.4,0) -- cycle;
\draw[thick, fill=white] (0,0) ellipse (0.4 and 0.10);
\draw[thick, fill=white] (.4,-.1) arc (0:-180:0.4 and 0.10);
\draw[thick] (0.4,0) -- (0.4, -.1);
\draw[thick] (-0.4,0) -- (-0.4, -.1);

\end{scope}

}

\newcommand{\bean}[2]{
\begin{scope}[shift={#1}, rotate={#2}]

\draw [very thick, fill=gray!50] plot [smooth cycle] coordinates {(-.2,0) (-.175, .07) (-.1,.1) (0,.075) (.1,.1) (.175, .07) (.2,0) (.15, -.07) (0,-.1) (-.15, -.07)};

\end{scope}

}

\newcommand{\heap}[2]{
\begin{scope}[shift={#1}]

\draw[very thick] (0,0) circle ({#2});

\end{scope}

}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\)</div>
<header id="masthead" class="smallbuttons"><div class="banner"><div class="container">
<a id="logo-link" href=""></a><div class="title-container">
<h1 class="heading"><a href="game.html"><span class="title">How to Be a Player:</span> <span class="subtitle">Impartial Combinatorial Games</span></a></h1>
<p class="byline">Andrew Beveridge</p>
</div>
</div></div>
<nav xmlns:svg="http://www.w3.org/2000/svg" id="primary-navbar" class="navbar"><div class="container">
<div class="navbar-top-buttons">
<button class="sidebar-left-toggle-button button active" aria-label="Show or hide table of contents sidebar">Contents</button><div class="tree-nav toolbar toolbar-divisor-3"><span class="threebuttons"><a id="previousbutton" class="previous-button toolbar-item button" href="hack-lumberjack.html" title="Previous">Prev</a><a id="upbutton" class="up-button button toolbar-item" href="ch-hack.html" title="Up">Up</a><a id="nextbutton" class="next-button button toolbar-item" href="hack-green0.html" title="Next">Next</a></span></div>
</div>
<div class="navbar-bottom-buttons toolbar toolbar-divisor-4">
<button class="sidebar-left-toggle-button button toolbar-item active">Contents</button><a class="previous-button toolbar-item button" href="hack-lumberjack.html" title="Previous">Prev</a><a class="up-button button toolbar-item" href="ch-hack.html" title="Up">Up</a><a class="next-button button toolbar-item" href="hack-green0.html" title="Next">Next</a>
</div>
</div></nav></header><div class="page">
<div xmlns:svg="http://www.w3.org/2000/svg" id="sidebar-left" class="sidebar" role="navigation"><div class="sidebar-content">
<nav id="toc"><ul>
<li class="link frontmatter"><a href="frontmatter.html" data-scroll="frontmatter"><span class="title">Front Matter</span></a></li>
<li class="link part"><a href="nim.html" data-scroll="nim"><span class="codenumber">I</span> <span class="title">The Game of Nim</span></a></li>
<li class="link">
<a href="ch-games.html" data-scroll="ch-games"><span class="codenumber">1</span> <span class="title">Combinatorical Games</span></a><ul>
<li><a href="nimble.html" data-scroll="nimble">Nimble</a></li>
<li><a href="comb-games.html" data-scroll="comb-games">Combinatorial Games</a></li>
<li><a href="game-trees.html" data-scroll="game-trees">Game Trees</a></li>
<li><a href="nimble-exercise.html" data-scroll="nimble-exercise">Exercises</a></li>
</ul>
</li>
<li class="link">
<a href="ch-nim.html" data-scroll="ch-nim"><span class="codenumber">2</span> <span class="title">Nim</span></a><ul>
<li><a href="sec-nim.html" data-scroll="sec-nim">The Game of Nim</a></li>
<li><a href="sec-binary.html" data-scroll="sec-binary">Binary Representation of Numbers</a></li>
<li><a href="sec-nim-win.html" data-scroll="sec-nim-win">Who wins at Nim?</a></li>
<li><a href="nim-bogus0.html" data-scroll="nim-bogus0">Bogus Nim Heaps</a></li>
<li><a href="nim-exercise.html" data-scroll="nim-exercise">Exercises</a></li>
</ul>
</li>
<li class="link">
<a href="ch-sg.html" data-scroll="ch-sg"><span class="codenumber">3</span> <span class="title">Sprague-Grundy Values</span></a><ul>
<li><a href="sg-mex.html" data-scroll="sg-mex">Mex</a></li>
<li><a href="sg-subtract.html" data-scroll="sg-subtract">Subtraction Games</a></li>
<li><a href="sg-nim.html" data-scroll="sg-nim">Sprague-Grundy Values for Nim</a></li>
<li><a href="sg-winner.html" data-scroll="sg-winner">Who Wins?</a></li>
<li><a href="sg-sumgames.html" data-scroll="sg-sumgames">The Sprague-Grundy Theorem</a></li>
<li><a href="exercises-3.html" data-scroll="exercises-3">Exercises</a></li>
</ul>
</li>
<li class="link">
<a href="ch-hack.html" data-scroll="ch-hack"><span class="codenumber">4</span> <span class="title">Green Hackenbush</span></a><ul>
<li><a href="hack-bamboo.html" data-scroll="hack-bamboo">Bamboo Stalks</a></li>
<li><a href="hack-lumberjack.html" data-scroll="hack-lumberjack">Lumberjack</a></li>
<li><a href="hack-tuft.html" data-scroll="hack-tuft" class="active">Proof of the Tuft Principle</a></li>
<li><a href="hack-green0.html" data-scroll="hack-green0">Green Hackenbush</a></li>
<li><a href="hack-fusion.html" data-scroll="hack-fusion">Proof of the Fusion Principle</a></li>
<li><a href="nimble-exercise.html" data-scroll="nimble-exercise">Exercises</a></li>
</ul>
</li>
</ul></nav><div class="extras"><nav><a class="pretext-link" href="https://pretextbook.org">Authored in PreTeXt</a><a href="https://www.mathjax.org"><img title="Powered by MathJax" src="https://www.mathjax.org/badge/badge.gif" alt="Powered by MathJax"></a></nav></div>
</div></div>
<main class="main"><div id="content" class="pretext-content"><section xmlns:svg="http://www.w3.org/2000/svg" class="section" id="hack-tuft"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">4.3</span> <span class="title">Proof of the Tuft Principle</span>
</h2>
<p id="p-326">We now prove the Tuft Principle, <a class="xref" data-knowl="./knowl/thm-tuft.html" title="Theorem 4.2.4: The Tuft Principle">Theorem 4.2.4</a>. Our first step is to prove the following easy lemma. First, we define a <dfn class="terminology">\(k\)-tuft</dfn> to be a tree  whose only branching point is its root \(x\text{.}\) In other words, a \(k\)-tuft  consists of \(k\) paths  \(B_1, B_2, \ldots, B_k\) that all meet at vertex \(x\text{.}\) An example of a 4-tuft is shown in  <a class="xref" data-knowl="./knowl/fig-division.html" title="Figure 4.3.2">Figure 4.3.2</a>.</p>
<article class="lemma theorem-like" id="lemma-tuft"><h6 class="heading">
<span class="type">Lemma</span><span class="space"> </span><span class="codenumber">4.3.1</span><span class="period">.</span>
</h6>Let \(G\) be a \(k\)-tuft rooted  at vertex \(x\text{,}\) which is at ground level.  Let \(B_1, B_2, \ldots, B_k\) be the paths that meet at vertex \(x\text{.}\) For \(1 \leq i \leq k\text{,}\) let \(m_i\) denote the number of edges in \(B_i\text{.}\) Then<div class="displaymath">
\begin{equation*}
\g(G) = \g(B_1) \oplus \g(B_2) \oplus \cdots \oplus \g(B_k) = m_1 \oplus m_2 \oplus \cdots \oplus m_k.
\end{equation*}
</div></article><p id="p-327"><article class="hiddenproof" id="proof-10"><a data-knowl="" class="id-ref proof-knowl original" data-refid="hk-proof-10"><h6 class="heading"><span class="type">Proof<span class="period">.</span></span></h6></a></article><div class="hidden-content tex2jax_ignore" id="hk-proof-10"><article class="hiddenproof"><p id="p-328">The idea of the proof is quite simple. We can think of the ground as one (very long) root vertex. Hacking a particular branch does not affect any of the other branches of \(G\text{.}\) So we can simply divide the tree at its root and create \(k\) independent bamboo stalks of sizes \(m_1, m_2, \ldots, m_k\)  as shown in  <a class="xref" data-knowl="./knowl/fig-division.html" title="Figure 4.3.2">Figure 4.3.2</a>.</p>
<p id="p-329"><figure class="figure figure-like" id="fig-division"><div class="image-box" style="width: 80%; margin-left: 10%; margin-right: 10%;"><img src="images/fig-img-division.svg" role="img" class="contained"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">4.3.2<span class="period">.</span></span><span class="space"> </span>Dividing a 4-tuft at its root \(x\) results in a forest of bamboo stalks. These two positions in Lumberjack are equivalent.</figcaption></figure></p>
<p id="p-330">The Sprague-Grundy value of these independent bamboo stalks is just the nim sum of their individual Sprague-Grundy values by  <a class="xref" data-knowl="./knowl/thm-sg.html" title="Theorem 3.5.1">Theorem 3.5.1</a>. Therefore</p>
<div class="displaymath">
\begin{equation*}
\g(G) = \g(B_1) \oplus \g(B_2) \oplus \cdots \oplus \g(B_k).
\end{equation*}
</div>
<p class="continuation">The Sprague-Grundy value of a bamboo stalk is equal to its height (see Exercise 1 below), so this simplifies to</p>
<div class="displaymath">
\begin{equation*}
\g(G) = m_1 \oplus m_2 \oplus \cdots \oplus m_k.
\end{equation*}
</div></article></div></p>
<p id="p-331"><a class="xref" data-knowl="./knowl/lemma-tuft.html" title="Lemma 4.3.1">Lemma 4.3.1</a> is a special case of the Tuft Principle. It says that the Tuft Principle holds when the branching vertex is on the ground. We can now prove the Tuft Principle itself, which says that we can still take the nim sums of these branching paths when we are "up in the air." We introduce the following notation. Let \(G\) be a graph rooted at vertex \(x\text{,}\) and let \(y\) be another vertex of \(G\text{.}\) Let \(H\) be another rooted graph, with root \(z\text{.}\) We define the rooted graph</p>
<div class="displaymath">
\begin{equation*}
[G_y : H]
\end{equation*}
</div>
<p class="continuation">to be the graph obtained by starting with the rooted graph \(G\) and then attaching the graph \(H\) to \(G\) so that the root \(z\) of \(H\) is identified with the vertex \(y\) of \(G\text{.}\) See  <a class="xref" data-knowl="./knowl/fig-tuft-ex.html" title="Figure 4.3.3">Figure 4.3.3</a> for an example.</p>
<p id="p-332"><figure class="figure figure-like" id="fig-tuft-ex"><div class="image-box" style="width: 80%; margin-left: 10%; margin-right: 10%;"><img src="images/fig-img-tuft-ex.svg" role="img" class="contained"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">4.3.3<span class="period">.</span></span><span class="space"> </span>Joining the rooted trees \(G\) and \(H\) to obtain the graph \([G_y : H]\) We identify the vertex \(y\) in \(G\) with the root \(z\) of \(H\text{.}\)</figcaption></figure></p>
<p id="p-333">We are now ready to prove the Tuft Principle, which we restate here for convenience:</p>
<blockquote class="blockquote" id="blockquote-1"><p id="p-334">If \(k\) paths \(B_1, B_2, \ldots, B_k\) come together at a vertex of the tree \(G\text{,}\) then we can replace this set of paths with a single path of length \(\g(B_1) \oplus \g(B_2) \oplus \cdots \oplus \g(B_k)\text{.}\)</p></blockquote>
<p id="p-335">In order to prove  <a class="xref" data-knowl="./knowl/thm-tuft.html" title="Theorem 4.2.4: The Tuft Principle">Theorem 4.2.4</a>, we will rephrase it using our new notation. The Tuft Principle is equivalent to the following statement:</p>
<blockquote class="blockquote" id="blockquote-2">
<p id="p-336">Let \(G\) be a tree rooted at \(x\) and let \(y\) be a leaf of \(G\text{.}\)  Let \(T_1\) be a \(k\)-tuft with \(\g(T_2)=\ell\text{,}\) and let \(T_2\) be a bamboo stalk of height \(\ell\text{.}\) Then</p>
<div class="displaymath">
\begin{equation*}
\g([G_y:T_1]) = \g([G_y:T_2])
\end{equation*}
</div>
<p class="continuation">.</p>
</blockquote>
<p id="p-337">Let's interpret what this statement is saying (since there is a lot of notation). Returning to  <a class="xref" data-knowl="./knowl/fig-tuft-ex.html" title="Figure 4.3.3">Figure 4.3.3</a>, we see that</p>
<div class="displaymath">
\begin{equation*}
\g(H) = *1 \oplus *2 \oplus *3 = 0.
\end{equation*}
</div>
<p class="continuation">Therefore, \(\g(H)\) is equivalent to \(*0\) (or equivalently, a bamboo stalk \(P_1\) of height 0). The Lemma tells us that</p>
<div class="displaymath">
\begin{equation*}
\g([G_y: H]) = \g([G_y: P_1]).
\end{equation*}
</div>
<p class="continuation">Of course, the graph \([G_y:P_1]\) is the same as the graph \(G\text{,}\) so we conclude that \(\g([G_y: H]) = \g(G)\text{.}\) What does this mean? The addition of \(H\) to \(G\) does not change the outcome of the game: it merely adds some reversible moves. Indeed, if your opponent chooses to hack an edge in the \(H\)-part of the graph \([G_y:H]\) then you can always find a counter-hack in the remaining \(H\)-part to return the value of the game back to its value prior to your opponent's move.</p>
<p id="p-338">We are now ready to prove the Tuft Principle!</p>
<p id="p-339"><article class="hiddenproof" id="proof-11"><a data-knowl="" class="id-ref proof-knowl original" data-refid="hk-proof-11"><h6 class="heading"><span class="title">Proof of Theorem 4.2.4.</span></h6></a></article><div class="hidden-content tex2jax_ignore" id="hk-proof-11"><article class="hiddenproof"><p id="p-340">A crucial ingredient to this proof is that we know how to calculate the Sprague-Grundy values for \(T_1\) (by  <a class="xref" data-knowl="./knowl/lemma-tuft.html" title="Lemma 4.3.1">Lemma 4.3.1</a>) and \(T_2\) (because it is a bamboo stalk).  The methodology of our proof is quite elegant: we make clever use of the Tweedledum-Tweedledee Principle! We will prove that the sum of games</p>
<div class="displaymath">
\begin{equation*}
[G_y : T_1] \oplus [G_y : T_2]
\end{equation*}
</div>
<p class="continuation">is a \(\cP\)-position. This means that</p>
<div class="displaymath">
\begin{equation*}
0 = \g \big( [G_y : T_1] \oplus [G_y : T_2] \big) = \g \big( [G_y : T_1] \big) \oplus \g \big( [G_y : T_2] \big).
\end{equation*}
</div>
<p class="continuation">Of course, this last equation is equivalent to \(\g([G_y:T_1] )= \g([G_y:T_2]).\) So let's get started.</p>
<p id="p-341"><figure class="figure figure-like" id="fig-tuft-proof"><div class="image-box" style="width: 60%; margin-left: 20%; margin-right: 20%;"><img src="images/fig-img-tuft-proof.svg" role="img" class="contained"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">4.3.4<span class="period">.</span></span><span class="space"> </span>The Lumberjack position \([G_y:T_1] \oplus [G_y:T_2]\text{.}\) When \(\g(T_1) = \g(T_2)\text{,}\) this is a \(\cP\)-position.</figcaption></figure></p>
<p id="p-342">Consider the Lumberjack position \([G_y:T_1] \oplus [G_y:T_2]\) with Left to move, as shown in Figure <a class="xref" data-knowl="./knowl/fig-tuft-proof.html" title="Figure 4.3.4">Figure 4.3.4</a>. We show that this is a \(\cP\)-position by strong induction on \(m\text{,}\) t he maximum number of edges in the graphs \([G_y:T_1]\) and \([G_y:T_1]\text{.}\) We will show that for every possible Left move, Right has a countermove that puts the game into a \(\cP\)-position.</p>
<p id="p-343">Our base case is  \(m=0\text{,}\) where neither graph has any edges. Of course, this is a terminal position (hence a \(\cP\)-position). Futhermore, in this case, \([G_y:T_1]  = [G_y:T_2]\text{,}\) so this is not very satisfying. So let's look and the next values of \(m\text{.}\) If \(m=1\text{,}\) then once again, the graphs are identical: they must each be bamboo stalks of height 1. This is obviously a \(\cP\)-position by Tweedledum-Tweedledee. At \(m=2\text{,}\) we finally have a non-trivial example: there  are three possibilities for the position \([G_y:T_1] \oplus [G_y:T_2]\text{,}\) shown in  <a class="xref" data-knowl="./knowl/fig-tuft-proof2.html" title="Figure 4.3.5">Figure 4.3.5</a>. Each of these positions is a \(\cP\)-position. Only the third example has \(T_1 \neq T_2\text{.}\)</p>
<p id="p-344"><figure class="figure figure-like" id="fig-tuft-proof2"><div class="image-box" style="width: 80%; margin-left: 10%; margin-right: 10%;"><img src="images/fig-img-tuft-proof2.svg" role="img" class="contained"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">4.3.5<span class="period">.</span></span><span class="space"> </span>The two possible structures for  \([G_y:T_1] \oplus [G_y:T_2]\) when the larger of the two graphs has 2 edges. All three positions are \(\cP\)-positions.</figcaption></figure></p>
<p id="p-345">Next, assume by induction that the lemma holds when there are fewer than \(m\) edges in each of \([G_y:T_1]\) and \([G_y:T_2]\text{.}\)</p>
<p id="p-346">Consider a pair of trees  \([G_y:T_1]\) and \([G_y:T_2]\) where at least one of these trees has \(m\) edges. We handle the case where Left hacks an edge in \([G_y:T_1]\text{.}\) There are two kinds of moves available to Left.</p>
<p id="p-347">First, Left can hack off an edge in the \(G\)-part of \([G_y:T_1]\text{.}\) Right responds by hacking  that same edge in the \(G\)-part of \([G_y:T_2]\text{.}\) If these moves disconnect vertex \(y\text{,}\) then the branches \(T_1\) and \(T_2\) fall off; we are left with two identical subtrees of \(G\text{.}\) This is a \(\cP\)-position by Tweedledum-Tweedledee. If these moves do not disconnect \(y\text{,}\) then we are left with graphs \([G'_y:T_1]\) and \([G'_y:T_2]\) and each graph has fewer than \(m\) edges. By induction, this is a \(\cP\)-position with Left's turn to play.</p>
<p id="p-348">Second, Left can hack off an edge in the tuft \(T_1\) of \([G_y:T_1]\) to result in the graph \([G_y:T_1']\) where \(T_1'\) is a follower of \(T_1\text{.}\) There are two cases to consider, depending on whether  \(\g(T_1') &gt; \g(T_1)\) or \(\g(T_1') &lt; \g(T_1)\text{.}\) (Why do we know that \(\g(T_1') \neq \g(T_1)\text{?}\))</p>
<ul class="disc">
<li id="li-88"><p id="p-349">If \(\g(T_1') &gt; \g(T_1)\text{,}\) then Right will respond by also playing in the same component. Since \(\g(T_1') &gt; \g(T_1)\text{,}\) we know that \(T_1'\) has a follower \(T_1"\) such that \(\g(T_1") = \g(T_1)\text{.}\) Right hacks the appropriate \(T_1"\) edge to get to \([G_y : T_1"]\text{.}\) This puts us in the game position \([G_y : T_1"] \oplus [G_y : T_2]\text{.}\) We have \(\g(T_1") = \g(T_1) = \g(T_2)\) and the total number of edges in this position is smaller than \(m\text{.}\) By induction, this is a \(\cP\)-position with Left's turn to play.</p></li>
<li id="li-89"><p id="p-350">If \(\g(T_1') &lt; \g(T_1)\) the Right will respond by hacking an edge in \(T_2\text{.}\) Indeed, \(T_2\) has a follower \(T_2'\) with \(\g(T_2') = \g(T_1')\text{,}\) so Right hacks the appropriate edge to create the position \([G_y : T_1'] \oplus [G_y : T_2']\text{.}\) This position satisfies the conditions of the Lemma, and has fewer than \(m\) edges. By induction this is a \(\cP\)-position with Left's turn to play.</p></li>
</ul>
<p class="continuation">We have now shown that Right can respond to any move of Left, putting the game into a \(\cP\)-position. Therefore the original position \([G_y:T_1] \oplus [G_y:T_2]\) is a \(\cP\)-position. This completes the proof of the Tuft Principle.</p></article></div></p>
<p id="p-351">Finally we summarize why the Tuft Principle enables us to find the Sprague-Grundy value of any tree. Starting from the leaves of the tree, we work our way towards the root. Every time we encounter a vertex of degree 3 or larger, we have found a tuft. We apply the Tuft Principle to replace that tuft with a path of the appropriate length. This operation preserves the Sprague-Grundy value of the tree.</p>
<p id="p-352">We continue this process until we are left with a rooted path (otherwise known as a bamboo stalk). The Sprague Grundy value of a bamboo stalk is equal to its height. Therefore, the height of the resulting path is the Sprague-Grundy value of the original tree.</p>
<p id="p-353"><figure class="figure figure-like" id="fig-big-tuft-example"><div class="image-box" style="width: 90%; margin-left: 5%; margin-right: 5%;"><img src="images/fig-img-big-tuft-example.svg" role="img" class="contained"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">4.3.6<span class="period">.</span></span><span class="space"> </span>Each tree is obtained from the previous one via the Tuft Principle. Each of the trees has Sprague-Grundy value of 4.</figcaption></figure></p>
<p id="p-354"><a class="xref" data-knowl="./knowl/fig-big-tuft-example.html" title="Figure 4.3.6">Figure 4.3.6</a> shows a complicated example. The original tree has 4 vertices of degree 3 or more, so it takes 4 applications of the Tuft Principle to find the Sprague-Grundy value.</p>
<p id="p-355">So we've solved the game of Lumberjack, just as we solved the game of Nim. After calculating the Sprague-Grundy value, we know if we are in a winning \(\cN\)-position, or a losing \(\cP\)-position. When the Sprague-Grundy value is positive, then a winning move is to create a position with a Sprague-Grundy value of zero.</p></section></div></main>
</div>
</body>
</html>
